---
import { Image } from "astro:assets";

interface Props {
  src: string;
  alt: string;
  caption?: string;
  attrs?: any;
};

const { src, alt, caption, attrs } = Astro.props;
---
<figure>
  <Image src={src} alt={alt} {...attrs} />
  <figcaption>{caption ? caption : alt}</figcaption>
</figure>

<style>
  figure {
    display: flex;
    flex-flow: column;
    justify-content: center;
    padding: 1.25rem 0.75rem;
    background-color: #fff;
    border: var(--border) var(--border-color);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    transition-property: all;

    figcaption {
      text-align: center;
      font-size: 1rem;
      margin-top: calc(1lh - 2px);
      height: 1.75lh;
      text-overflow: ellipsis;
    }
    
    img { 
      aspect-ratio: 12 / 7;
      object-fit: cover;
      object-position: top;
      width: 100%;
      height: auto;
      border: var(--border) var(--border-color);
    }
  }

  :global([data-theme="dark"]) figure { background-color: #000; }
</style>